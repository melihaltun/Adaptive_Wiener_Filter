/**
* @file testAdaptiveFilter.cpp
* @author Melih Altun @2023
**/

#include "adaptiveFilter.h"

int main() {
	double in[] = { 0.156516218389677, 2.33505283497987, -1.26267878694855, -0.0382508093542278, -6.74500863039913, -15.7617385729999, -14.8794327317198, -12.1037185088017, -0.208353673474127, 4.97003231259235, 12.9040459638005, 18.8888472549054, 25.4511644863435, 29.3381906540992, 27.4684422295852, 25.1605901480644, 24.2453657417302, 20.2609882627893, 10.4917847547281, 4.24964616343352, 1.34406571814088, -4.08852141027940, -6.16979944812040, -4.90974717094723, -5.32994711070542, -1.46970578379169, -0.755710838623591, 0.881128233009391, 0.104893270748971, 0.109129255370314, 0.965943434384087, 0.489891363407762, -3.07831243235058, 2.10270294415152, -2.34871356961038, -2.95748788610323, 1.30111827892383, -1.17401061410762, -2.75912673335232, 0.0710660081192080, 2.91246157108206, 1.47940835779601, 1.14422362308366, -1.54259634500196, -1.18564269916013, 1.38689665419488, 1.99386892669007, 1.73301361134664, 1.01743305587968, -1.17181342742520, 0.319211084882575, 2.73518247758833, 3.33913984825999, 2.19548406256010, 2.17099248571624, 2.97121464391744, 2.21290155707135, 4.70801901086575, 4.27156426375521, 5.16053529421951, 4.75335687827047, 5.97968983051279, 5.08537845113860, 8.93989863747481, 6.58157922441362, 8.51739504701503, 4.94015992905134, 9.74042497924533, 8.01359756588667, 9.75818848576263, 8.37607302726629, 10.1602662208479, 8.37216167658287, 8.48767833237380, 7.56477624714749, 6.56038138879492, 9.18999142749197, 9.88649077018319, 8.07910674886545, 6.42902256975676, 5.23931217926911, 5.01539008381894, 8.66982635421001, 5.65042077591835, 3.38693805737612, 2.85479369945339, 2.96162371005401, 3.31623999959856, 6.27718123422226, 2.89030236468907, 0.573914474925508, 1.00058291159980, 0.278782252123610, 3.48720844135968, 4.21822831334971, 3.25789064015441, 0.184555168103086, 2.33452467630691, 0.275820908165388, 0.0141267077614650, -1.52275586268425, -0.327606660968677, -1.15938800534921, -0.335138537318060, -0.935331558279299, -0.471383737862558, -2.33113719956303, 0.859247261350515, -1.84417111873557, 0.601845879799616, -0.822038101262826, -1.13630304911981, -2.63044731787054, -0.282735505885267, 1.56919338860708, 2.73554197791503, 1.04719293986559, -1.65013749397469, -0.0487171957139282, 1.94845035207062, 1.06789662428056, -0.607843491422052, 0.682767059859253, 1.70265276567135, -0.219628872832500, -0.760527033664554, -0.844281294622235, 1.13914375460686, 1.10180110115425, -0.378837148803409, -1.93241594163814, 0.485605984413468, -0.102342100098086, 0.396055682170139, 2.37628731910842, 0.661542065339259, -1.08363077081564, 3.33380402654518, -0.945935124498632, -0.735649724496972, 0.831385691771021, -1.75033540206399, 1.04681534614890, 1.39546624009544, 5.09407926358316, 4.22020347991076, 3.05060877097907, 0.712211980964220, 2.78093444164878, 0.919504930624937, 0.0461842492030160, -2.49031355994933, -3.43587032715505, 0.520608894727528, 0.727466279975344, -0.477886002159386, 1.06546759740353, 0.600807069695945, -1.95126188394527, -1.71929833471093, 1.87792374995873, 0.783221242872330, -0.400032456444892, -1.51168099633741, 0.425776662042121, 0.388927335918828, -2.77074345550924, 1.41451322037712, 0.0916598158246748, 0.501625491107908, -1.98138707166384, 2.47085082028493, 1.22089175290587, -7.22641882708310, -13.3001868818295, -14.2248514202390, -8.53506002490920, -1.54287809759428, 5.15889801882022, 12.7097327546153, 19.3824289032729, 22.1454739250193, 28.1278317986869, 26.7700292413429, 27.5328843161506, 20.9406120719409, 18.5309318749725, 11.4518760195596, 6.57998685559067, -0.170223079415750, -1.49526158369497, -6.12883630829166, -6.48707649085826, -5.40603288278259, -1.49581353796756, 1.91960943728254, -0.351209661459885, -0.721049832313695, -0.207678624836676, -1.80898894349430, 1.35956018289656, 0.819567362056086, 0.772983075660228, -1.17637936918351, -2.68179835587269, -1.43457925672776, 0.638430892419954, -0.866724470806106, 0.602313784086968, -0.864828800367630, 0.435421916389269, -0.178128388793090, 0.653844547091690, -2.47370497820382, 1.97594755460418, -0.297655678722265, 0.635450725704595, 2.96961039209592, 0.378187996863992, 2.31681532898012, 0.391389024440342, 2.75432240866355, 2.28673375722011, 2.01301935531490, 2.01764913805060, 3.74638889546088, 2.00345234013240, 2.54572497447962, 5.90830178782299, 5.94867655696283, 6.33556557091826, 5.41609537863973, 6.51870828951923, 4.79050388761040, 5.48082593335963, 8.47697502917960, 6.61818301742987, 8.75319089211748, 6.47088335340543, 8.33033066973367, 7.70884037234040, 9.99107717611783, 9.13208551088582, 9.40851850460285, 7.08426289619165, 6.75330312768057, 6.32030718476350, 9.43288055240861, 8.30875668098192, 7.23136912983739, 5.28887586404866, 4.36814216613805, 6.97472989792473, 5.74513922157106, 2.87973180586484, 6.54302330212855, 0.985681490860711, 3.70084947423603, 3.82612501472114, 2.66660585887558, 0.634614953375782, 2.13089183757511, 1.12716222047244, 1.46792502772893, 0.439683142508471, 1.45838401810084, -0.259408237104333, -1.62043725794014, 1.56033650527482, 1.56127140316019, 1.28923468723919, -2.40343875685720, 0.662746244320150, -1.61978111869175, 1.35870117415628, 1.45066503412142, 1.56833892820207, 2.79016382049510, -2.05854510173671, 0.681304113417422, 2.48808528675961, 0.189526771293290, 0.203898507286606, -0.867447414252360, 1.86925583507194, 0.625052238483131, 2.06411454810508, -1.28282907783780, -0.962447604588035, 0.363600667844940, 0.606005796517140, -1.09478969343709, 0.893583967971927, -0.0696622398994752, 2.26097415184753, 0.438875845362170, 0.750088924154649, -0.991265644678614, -2.16930379679111, -3.15559284383603, 3.32893471692473, 1.18760078115496, 2.49744072281764, 0.0179987931041187, -2.14044027454523, -1.54631163024062, -1.65948789458154, -3.54677637407290, 1.02816824908749, -1.42723155072155, 0.745308243691452, 1.05390601048770, 0.453306841927836, 3.90349923114735, 2.80992997894026, 0.160389509600603, 2.21189229575404, 2.44484988131454, 0.701462156333752, 1.33782248024049, 2.20880835134898, 0.665410269545328, 1.65527416077213, 2.93391403029162, 2.58370499826535, 0.640127666684740, 2.57157636357601, -2.17577739209617, 0.182361043468097, 1.05800025806584, 0.606604998871119, -0.330560643714567, -3.10295953266745, 0.0924817598598375, -1.85415793651152, -0.920148672847680, 1.24678513837397, -1.27503481795820, 1.26461279662223, -1.15236360181104, 2.91962607168356, 1.53875173961448, -7.65886342205904, -11.8827608926452, -9.89619924048403, -13.1327361810489, -3.48449597440787, 2.68539950494914, 12.5067999706657, 19.8974253840481, 24.0592349994573, 27.0696698974001, 28.5755014928198, 25.0139460095472, 21.0642490873428, 18.0457461965928, 10.0114837272126, 7.65353933313234, 2.36441186087965, -4.11125764018680, -4.44426044284818, -4.83833021010981, -4.70842084082547, -3.14550660983879, 1.56003776091609, 4.66293877570042, -0.305131502502354, 0.112291792333639, 1.62570711827960, -1.50806778934284, -2.03738933572908, -0.405493493741888, -3.73738527666894, -1.58026387534816, -1.49461027506588, 1.52675782564299, -0.679460374533891, -1.21836385054317, -0.622217892795939, -0.701234286285666, 1.94438240371205, -0.476454802148628, -1.44178365670193, 1.08523420440395, 0.599433967022145, 1.20959535026518, -0.718349561769480, -1.68748235809442, 1.00719576805204, 0.800826552559560, 1.13621507926089, 0.879925324059354, 2.53181496784530, 2.58513969420796, 2.64185927157326, 2.87114009639284, 0.273693641400365, 6.28065775951422, 6.10353620896859, 5.39570246103973, 9.46880485878840, 8.33176433400004, 6.18345280577787, 5.05223779178447, 6.23720428379527, 6.49691915403088, 9.33532928985484, 8.93293054681671, 11.2025140890926, 7.33008775197805, 9.60640993127250, 9.42307736477661, 8.38738277428224, 6.92276134677459, 10.0881942975705, 11.2522004983044, 9.15320050751297, 8.41101359284174, 5.13698247944160, 7.38623190288091, 8.23253359814735, 6.80173026255056, 5.22403660554942, 4.09389124309906, 4.94695276503201, 2.10812744835269, 1.12437462426866, 0.274126685942988, 1.99359344072084, 0.815077531884897, 3.55501855752167, 1.19156405683851, 2.41314215076619, -2.43220892666269, -0.251900928238636, -0.940324116795805, 1.53091714593662, 0.936122266614125, 4.42975150017748, 3.00748110171060, 2.20987089907184, -0.617181596012983, -4.06189827741756, 0.903557339938163, -0.0674318895338116, -0.380784111982466, 2.60378203958104, -4.49770378487966, -0.653450796329043, -2.98869873416674, -1.76786610466079, 0.773078559882108, 1.68674447941378, -0.241726711797032, -1.02578058985332, 2.72040993046419, 0.965408386053547, 1.67954965961567, 1.96539153860539, 2.32679664980337, 4.18780508011587, 1.46771749816738, 1.40953550246270, 0.906892532846081, 1.25095770675856, 0.325225236530004, 0.363996241835925, 0.710358104242964, -3.08217042576852, 2.12963037622033, 1.34435012423076, 0.739209795562255, 1.47129833884382, -0.616575285839113, -1.28949758181225, 1.01739738900571, 1.79057375741397, 0.863519537792327, -0.446518784361913, -1.98938361945992, 2.22062823778035, 2.33825780390881, 4.04525391624070, 3.13689393091966, 1.88565979593175, 3.06147353827725, 2.34647067623145, -0.678926130810138, 0.244700964382988, -0.643817752309102, -0.767670920681701, -0.405865920274990, -1.34916409956874, 0.456353866322230, 0.609475406603787, -0.508060158839090, -0.489869279670260, 2.91665899269752, 2.22171106053167, -1.52601549219294, 0.986687659551522, -0.659244095782536, -0.531413334375699, -1.10303374332471, -2.22020039172967, 1.78576142493705, -2.89547084076660 };
	double out[507];

	adaptiveFilterInstance filter;
	adaptiveFilterInput f_in;
	adaptiveFilterOutput f_out;
	

	adaptiveFilterInit(&filter);

	for (int k = 0; k < 507; k++) {
		f_in.inputValue = in[k];
		adaptiveFilterRun(&f_in, &filter, &f_out);
		out[k] = f_out.outputValue;
	}

	adaptiveFilterEnd(&filter);
	return 0;
}

